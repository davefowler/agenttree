<!-- Shared issue detail template - used by both kanban modal and flow panel -->
<div class="issue-detail">
    <div class="detail-header">
        <div class="detail-title">
            #{{ issue.number }}: {{ issue.title }}
        </div>
        <div class="detail-meta">
            <span>Stage: {{ issue.stage.value.replace('_', ' ').title() }}</span>
            <span>Status: {{ issue.status.value.title() }}</span>
            {% if issue.assignees %}
            <span>Assignees: {{ ', '.join(issue.assignees) }}</span>
            {% endif %}
            {% if issue.assigned_agent %}
            <span>Agent: {{ issue.assigned_agent }}</span>
            {% endif %}
        </div>
    </div>

    <div class="detail-body">
        {{ issue.body if issue.body else "No description provided." }}
    </div>

    {% if issue.labels %}
    <div class="detail-labels">
        {% for label in issue.labels %}
        <span class="label">{{ label }}</span>
        {% endfor %}
    </div>
    {% endif %}

    <div class="detail-actions">
        {% if issue.pr_url %}
        <a href="{{ issue.pr_url }}" target="_blank" class="btn btn-primary">View PR #{{ issue.pr_number }}</a>
        {% endif %}
        {% if issue.url %}
        <a href="{{ issue.url }}" target="_blank" class="btn">View Issue</a>
        {% endif %}
        <button class="btn"
                hx-post="/api/issues/{{ issue.number }}/start"
                hx-target="#dispatch-status-{{ issue.number }}"
                hx-swap="innerHTML">
            Start Agent
        </button>
        <span id="dispatch-status-{{ issue.number }}"></span>
    </div>

    <div class="detail-timestamps">
        <small>Created: {{ issue.created_at.strftime('%Y-%m-%d %H:%M') }}</small>
        <small>Updated: {{ issue.updated_at.strftime('%Y-%m-%d %H:%M') }}</small>
    </div>
</div>
